FROM postgres:18

# Install pg_cron
# The apt-get update is necessary to fetch the latest package lists from the PGDG repo
RUN apt-get update && \
    apt-get install -y postgresql-17-cron && \
    rm -rf /var/lib/apt/lists/*

# Configure PostgreSQL to load pg_cron at startup
# We invoke postgres with the config overrides.
# cron.database_name is set to 'galaxy_empire' so pg_cron tables are created there
CMD ["postgres", "-c", "shared_preload_libraries=pg_cron", "-c", "cron.database_name=galaxy_empire"]